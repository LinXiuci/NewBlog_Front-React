{"version":3,"file":"static/js/48.f0e37104.chunk.js","mappings":"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","sources":["views/Album/page/classification-page.tsx"],"sourcesContent":["import { Suspense, useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate, NavigateFunction } from \"react-router-dom\";\r\n\r\nimport { getAlbumResources, backupAlbumResources } from \"../../../api/app-album-api\";\r\nimport \"../css/classification-page.css\";\r\n\r\ninterface ClassificationResultsType {\r\n  key: string;\r\n  title: string;\r\n  url: string;\r\n}\r\n/**\r\n * @description 图片分类组件\r\n *  */\r\nfunction ClassificationPage() {\r\n  // 导航跳转\r\n  const navigate: NavigateFunction = useNavigate();\r\n\r\n  const handleNavigate = (key: string) => {\r\n    if (!key) return;\r\n    navigate(`/app-album/classification/detailed?key=${key}`);\r\n  };\r\n\r\n  // 获取分类背景图资源\r\n  const [data, setData] = useState<ClassificationResultsType[]>([]);\r\n  // 获取分类背景图资源时出现错误\r\n  const [error, setError] = useState<Error | null>(null);\r\n\r\n  // 请求分类背景图资源\r\n  const fetchResults = async () => {\r\n    const { results, error } = await getAlbumResources<ClassificationResultsType>();\r\n    setData(backupAlbumResources || results);\r\n    setError(error);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchResults();\r\n  }, []);\r\n\r\n  // 操作图片分类目录区的元素\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const scrollLeftRef = useRef<HTMLButtonElement>(null);\r\n  const scrollRightRef = useRef<HTMLButtonElement>(null);\r\n\r\n  // 点击左右滚动\r\n  const handleScrollContent = (event: any, scrollDistance: number): void => {\r\n    event.preventDefault();\r\n\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    let currentScrollLeft = container.scrollLeft;\r\n    let newScrollLeft = currentScrollLeft + scrollDistance;\r\n    const isDisableButtonLeft = newScrollLeft <= 0;\r\n    const isDisableButtonRight = newScrollLeft >= container.scrollWidth - container.clientWidth;\r\n    // 当滚动到最大值时，不再滚动\r\n    if (isDisableButtonLeft && isDisableButtonRight) return;\r\n\r\n    isDisableButton(isDisableButtonLeft, isDisableButtonRight);\r\n    container.scrollTo({\r\n      left: newScrollLeft,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  // 是否禁用 button\r\n  const isDisableButton = (isDisableButtonLeft: boolean, isDisableButtonRight: boolean): void => {\r\n    if (scrollLeftRef.current && isDisableButtonLeft) {\r\n      scrollLeftRef.current.classList.add(\"active\");\r\n      scrollLeftRef.current.disabled = true;\r\n    } else {\r\n      scrollLeftRef.current!.classList.remove(\"active\");\r\n      scrollLeftRef.current!.disabled = false;\r\n    }\r\n\r\n    if (scrollRightRef.current && isDisableButtonRight) {\r\n      scrollRightRef.current.classList.add(\"active\");\r\n      scrollRightRef.current.disabled = true;\r\n    } else {\r\n      scrollRightRef.current!.classList.remove(\"active\");\r\n      scrollRightRef.current!.disabled = false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"app-album-classification-component\">\r\n      {/* 目录头部 header */}\r\n      <header className=\"app-album-classification-header\">\r\n        <div>目录</div>\r\n        <div onClick={() => navigate(-1)}>Home</div>\r\n      </header>\r\n      {/* 图片分类目录区 */}\r\n      <section className=\"app-album-classification-container\" ref={containerRef}>\r\n        {error ? (\r\n          <article className=\"app-album-classification-content-item\">{error.message}</article>\r\n        ) : (\r\n          <Suspense fallback={<div>loading...</div>}>\r\n            {data.map((item) => (\r\n              <article className=\"app-album-classification-content-item\" key={item.key} onClick={() => handleNavigate(item.key)}>\r\n                <div style={{ backgroundImage: `URL(${item.url})` }}></div>\r\n                <div>{item.title}</div>\r\n              </article>\r\n            ))}\r\n          </Suspense>\r\n        )}\r\n      </section>\r\n      {/* 点击左右移动 */}\r\n      <footer className=\"app-album-classification-footer\">\r\n        <button ref={scrollLeftRef} onClick={(e) => handleScrollContent(e, -containerRef.current!.offsetWidth)}>\r\n          &lt;\r\n        </button>\r\n        <button ref={scrollRightRef} onClick={(e) => handleScrollContent(e, containerRef.current!.offsetWidth)}>\r\n          &gt;\r\n        </button>\r\n      </footer>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default ClassificationPage;\r\n"],"names":["navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","fetchResults","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$getAlbumResour","results","wrap","_context","prev","next","getAlbumResources","sent","backupAlbumResources","stop","apply","arguments","useEffect","containerRef","useRef","scrollLeftRef","scrollRightRef","handleScrollContent","event","scrollDistance","preventDefault","container","current","newScrollLeft","scrollLeft","isDisableButtonLeft","isDisableButtonRight","scrollWidth","clientWidth","isDisableButton","scrollTo","left","behavior","classList","add","disabled","remove","_jsxs","className","children","_jsx","onClick","ref","message","Suspense","fallback","map","item","key","concat","style","backgroundImage","url","title","e","offsetWidth"],"sourceRoot":""}